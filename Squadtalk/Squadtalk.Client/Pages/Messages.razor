@page "/Messages"
@using Microsoft.AspNetCore.Authorization
@using Squadtalk.Client.Layout

@attribute [Authorize]
@layout ChatLayout

<PageTitle>Squadtalk | Messages</PageTitle>

<ChannelSelector />

@inject ISignalrService SignalrService
@inject ICommunicationManager CommunicationManager

@code {
    
    protected override async Task OnInitializedAsync()
    {
        await CommunicationManager.ClearChannelSelectionAsync();
        await SignalrService.ConnectAsync();
    }
}